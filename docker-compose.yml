version: "3.8"
services:
  gateway:
    build:
      context: .
      dockerfile: Dockerfile.gateway
    image: yatas-gateway:local
    ports:
      - "5000:5000"
    environment:
      - PORT=5000

  app:
    build:
      context: .
      dockerfile: Dockerfile.app
      args:
        - SAP_GATEWAY_DEMO=0
    image: yatas-streamlit:local
    ports:
      - "8501:80"
    environment:
      - SAP_GATEWAY_DEMO=0
      - SAP_API_BASE_URL=http://gateway:5000/api
    depends_on:
      - gateway
